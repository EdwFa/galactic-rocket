# üîç RAGFlow Semantic Search

Streamlit –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞ —á–∞–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ RAGFlow API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (Rerank, KG, AI Summary).

![RAGFlow Integration](https://img.shields.io/badge/RAGFlow-Integration-blue)
![Streamlit](https://img.shields.io/badge/Streamlit-1.28+-red)
![Python](https://img.shields.io/badge/Python-3.11+-green)
![Docker](https://img.shields.io/badge/Docker-Supported-blue)

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîå **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RAGFlow** ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ URL –∏ API –∫–ª—é—á–∞.
- üìö **–ú—É–ª—å—Ç–∏-–¥–∞—Ç–∞—Å–µ—Ç –ø–æ–∏—Å–∫** ‚Äî –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –±–∞–∑–∞–º –∑–Ω–∞–Ω–∏–π.
- üîÑ **Rerank (–ü–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ)** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–æ–¥–µ–ª–µ–π Rerank –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
- üï∏Ô∏è **–°–≤—è–∑–Ω—ã–π –ø–æ–∏—Å–∫ (KG)** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–Ω–∞–Ω–∏–π (Knowledge Graph) –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.
- ü§ñ **–ò–ò-—Ä–µ–∑—é–º–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤.
- üó∫Ô∏è **Mind Map** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–∞—Ç–∞—Å–µ—Ç–∞.
- üê≥ **Docker Ready** ‚Äî –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:** `pip install -r requirements.txt`
2. **–ó–∞–ø—É—Å–∫:** `streamlit run app.py`

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker

```bash
docker compose up -d
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8501`.

---

## üîß –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è RAGFlowClient

–ú–æ–¥—É–ª—å `ragflow_client.py` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTP API RAGFlow.

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```python
from ragflow_client import RAGFlowClient

client = RAGFlowClient(
    base_url="http://localhost:9380",
    api_key="your-api-key",
    timeout=30
)
```

### –ú–µ—Ç–æ–¥—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

#### 1. `test_connection() -> bool`

–ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ RAGFlow. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç `True`, –µ—Å–ª–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç `/health` –æ—Ç–≤–µ—Ç–∏–ª —É—Å–ø–µ—à–Ω–æ.

#### 2. `list_datasets() -> list[dict]`

–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –≤ –∞–∫–∫–∞—É–Ω—Ç–µ.

- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –°–ø–∏—Å–æ–∫ —Å–ª–æ–≤–∞—Ä–µ–π —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ (id, name, –∏ –¥—Ä.).

#### 3. `retrieve_chunks(...) -> dict`

–û—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞.

- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
  - `question` (str): –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å.
  - `dataset_ids` (list[str]): –°–ø–∏—Å–æ–∫ ID –¥–∞—Ç–∞—Å–µ—Ç–æ–≤.
  - `rerank_id` (str, optional): ID –º–æ–¥–µ–ª–∏ Rerank –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞.
  - `use_kg` (bool): –í–∫–ª—é—á–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ –≥—Ä–∞—Ñ—É –∑–Ω–∞–Ω–∏–π (—Ç—Ä–µ–±—É–µ—Ç —Å–æ–±—Ä–∞–Ω–Ω—ã–π KG).
  - `similarity_threshold` (float): –ü–æ—Ä–æ–≥ —Å—Ö–æ–∂–µ—Å—Ç–∏ (0.0 - 1.0).
  - `vector_similarity_weight` (float): –í–µ—Å –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞ (vs —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ).
  - `top_k` (int): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–ª—è –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞.

#### 4. `get_ai_summary(assistant_id, question, session_id=None) -> dict`

–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç LLM –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

- **–õ–æ–≥–∏–∫–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç —Å–µ—Å—Å–∏—é —á–∞—Ç–∞, –µ—Å–ª–∏ `session_id` –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–æ, –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É.
- **–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** –û—Ç–≤–µ—Ç –æ—Ç API —á–∞—Ç–∞ —Å –ø–æ–ª–µ–º `answer`.

#### 5. `get_mind_map(dataset_id) -> dict`

–ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –¥–∞—Ç–∞—Å–µ—Ç–∞.

- **–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ó–Ω–∞–Ω–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –≤ RAGFlow —á–µ—Ä–µ–∑ "Run Knowledge Graph".

#### 6. `search(...) -> list[Chunk]`

–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `retrieve_chunks`, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ `Chunk`.

#### 7. `extract_chunks(retrieval_response) -> list[Chunk]`

–ü–∞—Ä—Å–∏—Ç —Å—ã—Ä–æ–π JSON –æ—Ç–≤–µ—Ç –æ—Ç API –∏ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –µ–≥–æ –≤ —Å–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ `Chunk`.

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

- `app.py` ‚Äî –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Streamlit —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –ª–æ–≥–∏–∫–æ–π –∏ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–µ–π.
- `ragflow_client.py` ‚Äî –Ø–¥—Ä–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ (API –∫–ª–∏–µ–Ω—Ç).
- `Dockerfile` & `docker-compose.yml` ‚Äî –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏.
- `requirements.txt` ‚Äî –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ—Å–Ω–æ–≤–Ω—ã–µ: `streamlit`, `requests`).

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License
